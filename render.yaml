services:
  - type: web
    name: rental-management-api
    runtime: docker
    plan: free
    dockerfilePath: ./RentalManagementSystem/Backend/RentalManagement.Api/Dockerfile
    dockerContext: ./RentalManagementSystem/Backend/RentalManagement.Api
    region: oregon # Free plan regions: oregon, frankfurt, singapore
    branch: main
    healthCheckPath: /api/health
    envVars:
      - key: ASPNETCORE_ENVIRONMENT
        value: Production
      - key: ASPNETCORE_URLS
        value: http://0.0.0.0:10000
      - key: DATABASE_URL
        value: Host=aws-1-ap-southeast-1.pooler.supabase.com;Port=5432;Database=postgres;Username=postgres.fpvgtejnkxkushmzkstu;Password=YOUR_PASSWORD;SSL Mode=Require;Trust Server Certificate=true;Maximum Pool Size=20;Max Auto Prepare=0;Auto Prepare Min Usages=0;
      - key: JWT_SECRET_KEY
        value: Nw6OuBAYTsjMpAvDW1r7xo62KAa8/7eTjS/+a9jO0h4=
      - key: FRONTEND_URL
        value: https://rental-management-fresh-2026.netlify.app
    
# Health check endpoint configuration
healthCheck:
  path: /api/health
  initialDelaySeconds: 30
  periodSeconds: 10
  timeoutSeconds: 5
  failureThreshold: 3
